{% extends 'base.html' %}

{% block page_title %}{{ block.super }}Never miss any water/power outage announcements{% endblock %}

{% block page_content %}
<div class="row">
  <h1>Never miss any water or power outage announcements again</h1>
</div>
<div class="row">
  <div class="col-md-6">
    <h3>Sign up for free email alerts</h3>
    <p>Get notified about upcoming and ongoing utility interruptions in Davao City. Subscribe to our free service now to stay updated and prepared.</p>

    <form action="{% url 'register_new_email' %}" method="post">
      {% csrf_token %}
      <p>
        <input type="email" name="email_address" id="email_input_box" class="form-control input-lg" placeholder="Enter your email address" required>
      </p>
      <p>
        <input type="submit" value="Register">
      </p>
    </form>
  </div>
  <div class="col-md-6">
    <h3>View recent alerts</h3>
    {% if recent_alerts %}
    <table class="table table-hover">
      <thead class="thead-dark">
        <tr>
          <th>Description</th>
          <th>Type</th>
          <th>Provider</th>
          <th>Posted</th>
        </tr>
      </thead>
      <tbody>
        {% for notice in recent_alerts %}
        <tr>
          <td>{{ notice.description }}</td>
          <td>{{ notice.outage_type }}</td>
          <td>{{ notice.provider }}</td>
          <td>{{ notice.posted_on }}</td>
        </tr>
        {% endfor %}
      </tbody>
    </table>
    {% else %}
    <p>No recent outage announcements to show.</p>
    {% endif %}
  </div>
</div>
{% endblock %}